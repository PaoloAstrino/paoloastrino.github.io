<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnet Lines Animation Preview</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            color: #ffffff;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 1200px;
        }

        /* Magnet Lines Animation Styles */
        .magnetLines-container {
            display: grid;
            grid-template-columns: repeat(var(--columns), 1fr);
            grid-template-rows: repeat(var(--rows), 1fr);
            justify-items: center;
            align-items: center;
            width: 60vmin;
            height: 60vmin;
            margin: 2rem auto;
        }

        .magnetLines-container span {
            display: block;
            transform-origin: center;
            will-change: transform;
            transform: rotate(var(--rotate));
            background-color: #ffffff;
            width: 0.3vmin;
            height: 5vmin;
            border-radius: 0.05vmin;
            opacity: 0.8;
        }

        .info {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }        .controls {
            margin-top: 30px;
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 200px;
        }

        .control-group h3 {
            margin-bottom: 10px;
            font-size: 14px;
            color: #ccc;
        }

        .control-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .control-row label {
            font-size: 12px;
            color: #aaa;
            min-width: 60px;
        }

        .control-row input[type="range"] {
            flex: 1;
            margin: 0 10px;
        }

        .control-row span {
            font-size: 12px;
            color: #fff;
            min-width: 40px;
            text-align: right;
        }

        .btn {
            background: #333;
            color: white;
            border: 1px solid #555;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #555;
            border-color: #777;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        .magnet-info {
            position: absolute;
            top: 10px;
            left: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .demo-area {
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .description {
            margin-top: 20px;
            text-align: center;
            color: #ccc;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß≤ Magnet Lines Animation</h1>
        
        <div class="info">
            <p><strong>Move your mouse over the area below</strong> to see the magnetic field effect!</p>
            <p>The lines will rotate and follow your cursor, creating an interactive visualization.</p>
        </div>

        <div class="demo-area">
            <div class="magnet-info">
                Mouse Tracking Active
            </div>
            <div class="magnetLines-container" id="magnetDemo">
                <!-- Lines will be generated by JavaScript -->
            </div>
        </div>        <div class="description">
            <p id="configDisplay">Configuration: 9x9 grid ‚Ä¢ White lines ‚Ä¢ 0.3vmin width ‚Ä¢ 5vmin height</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3>Grid Size</h3>
                <div class="control-row">
                    <label>Columns:</label>
                    <input type="range" id="columnsRange" min="3" max="20" value="9" step="1">
                    <span id="columnsValue">9</span>
                </div>
                <div class="control-row">
                    <label>Rows:</label>
                    <input type="range" id="rowsRange" min="3" max="20" value="9" step="1">
                    <span id="rowsValue">9</span>
                </div>
            </div>

            <div class="control-group">
                <h3>Line Properties</h3>
                <div class="control-row">
                    <label>Width:</label>
                    <input type="range" id="widthRange" min="0.1" max="2.0" value="0.3" step="0.1">
                    <span id="widthValue">0.3</span>
                </div>
                <div class="control-row">
                    <label>Height:</label>
                    <input type="range" id="heightRange" min="2" max="10" value="5" step="0.5">
                    <span id="heightValue">5</span>
                </div>
                <div class="control-row">
                    <label>Opacity:</label>
                    <input type="range" id="opacityRange" min="0.1" max="1.0" value="0.8" step="0.1">
                    <span id="opacityValue">0.8</span>
                </div>
            </div>

            <div class="control-group">
                <h3>Container</h3>
                <div class="control-row">
                    <label>Size:</label>
                    <input type="range" id="sizeRange" min="30" max="90" value="60" step="5">
                    <span id="sizeValue">60</span>
                </div>
                <div class="control-row">
                    <label>Base Angle:</label>
                    <input type="range" id="angleRange" min="-90" max="90" value="0" step="5">
                    <span id="angleValue">0¬∞</span>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn" onclick="applySettings()">üîÑ Apply Changes</button>
                <button class="btn" onclick="resetToDefaults()">‚Ü©Ô∏è Reset Defaults</button>
                <button class="btn" onclick="toggleLines()">üëÅÔ∏è Toggle Lines</button>
            </div>
        </div>
    </div>

    <script>
        // Magnet Lines Animation Class
        class MagnetLines {            constructor(containerSelector, options = {}) {
                this.container = document.querySelector(containerSelector);
                if (!this.container) {
                    console.error(`MagnetLines: Container "${containerSelector}" not found`);
                    return;
                }

                this.options = {
                    rows: 9,
                    columns: 9,
                    containerSize: "60vmin",
                    lineColor: "#ffffff",
                    lineWidth: "0.3vmin",
                    lineHeight: "5vmin",
                    baseAngle: 0,
                    className: "",
                    ...options
                };                this.isInitialized = false;
                this.mouseHasEntered = false; // Track if mouse has entered
                this.boundPointerMove = this.onPointerMove.bind(this);
                this.boundMouseEnter = this.onMouseEnter.bind(this);
                this.boundMouseLeave = this.onMouseLeave.bind(this);
                
                this.init();
            }

            init() {
                if (this.isInitialized) return;                this.setupContainer();
                this.createSpans();
                this.addEventListeners();
                this.setBasePosition(); // Set to base angle instead of center

                this.isInitialized = true;
            }

            setupContainer() {
                this.container.style.setProperty('--columns', this.options.columns);
                this.container.style.setProperty('--rows', this.options.rows);
                this.container.className = `magnetLines-container ${this.options.className}`.trim();
            }

            createSpans() {
                this.container.innerHTML = '';
                const total = this.options.rows * this.options.columns;
                
                for (let i = 0; i < total; i++) {
                    const span = document.createElement('span');
                    span.style.setProperty('--rotate', `${this.options.baseAngle}deg`);
                    this.container.appendChild(span);
                }
            }            onMouseEnter(event) {
                this.mouseHasEntered = true;
                this.onPointerMove(event);
            }            onMouseLeave(event) {
                // Keep lines at their last angle instead of returning to base angle
                // Do nothing - lines maintain their current rotation
            }

            onPointerMove(event) {
                // Only track mouse movement after first entry
                if (!this.mouseHasEntered) return;

                const items = this.container.querySelectorAll('span');
                
                items.forEach((item) => {
                    const rect = item.getBoundingClientRect();
                    const centerX = rect.x + rect.width / 2;
                    const centerY = rect.y + rect.height / 2;

                    const b = event.clientX - centerX;
                    const a = event.clientY - centerY;
                    const c = Math.sqrt(a * a + b * b) || 1;
                    const r = (Math.acos(b / c) * 180) / Math.PI * (event.clientY > centerY ? 1 : -1);

                    item.style.setProperty('--rotate', `${r}deg`);
                });
            }            addEventListeners() {
                // Add mouse enter/leave listeners to the container
                this.container.addEventListener('mouseenter', this.boundMouseEnter);
                this.container.addEventListener('mouseleave', this.boundMouseLeave);
                window.addEventListener('pointermove', this.boundPointerMove);
                window.addEventListener('mousemove', this.boundPointerMove);
            }            setBasePosition() {
                // Keep lines at base angle until mouse enters
                const items = this.container.querySelectorAll('span');
                items.forEach((item) => {
                    item.style.setProperty('--rotate', `${this.options.baseAngle}deg`);
                });
            }            destroy() {
                if (!this.isInitialized) return;

                this.container.removeEventListener('mouseenter', this.boundMouseEnter);
                this.container.removeEventListener('mouseleave', this.boundMouseLeave);
                window.removeEventListener('pointermove', this.boundPointerMove);
                window.removeEventListener('mousemove', this.boundPointerMove);
                
                this.container.innerHTML = '';
                this.isInitialized = false;
                this.mouseHasEntered = false; // Reset mouse tracking
            }
        }        // Animation instance
        let magnetLinesInstance = null;
        let currentSettings = {
            rows: 9,
            columns: 9,
            containerSize: "60vmin",
            lineColor: "#ffffff",
            lineWidth: "0.3vmin",
            lineHeight: "5vmin",
            baseAngle: 0,
            opacity: 0.8
        };

        // Initialize magnet lines
        function initMagnetLines(settings = currentSettings) {
            const container = document.getElementById('magnetDemo');
            if (container) {
                if (magnetLinesInstance) {
                    magnetLinesInstance.destroy();
                }
                
                magnetLinesInstance = new MagnetLines('#magnetDemo', settings);
                
                // Apply opacity to spans after creation
                setTimeout(() => {
                    const spans = container.querySelectorAll('span');
                    spans.forEach(span => {
                        span.style.opacity = settings.opacity;
                    });
                }, 100);
                
                updateConfigDisplay();
            }
        }

        // Update configuration display
        function updateConfigDisplay() {
            const display = document.getElementById('configDisplay');
            display.textContent = `Configuration: ${currentSettings.columns}x${currentSettings.rows} grid ‚Ä¢ ` +
                                `${currentSettings.lineWidth} width ‚Ä¢ ${currentSettings.lineHeight} height ‚Ä¢ ` +
                                `${currentSettings.opacity} opacity ‚Ä¢ ${currentSettings.baseAngle}¬∞ angle`;
        }

        // Apply settings from controls
        function applySettings() {
            // Get values from controls
            currentSettings.columns = parseInt(document.getElementById('columnsRange').value);
            currentSettings.rows = parseInt(document.getElementById('rowsRange').value);
            currentSettings.lineWidth = `${document.getElementById('widthRange').value}vmin`;
            currentSettings.lineHeight = `${document.getElementById('heightRange').value}vmin`;
            currentSettings.opacity = parseFloat(document.getElementById('opacityRange').value);
            currentSettings.containerSize = `${document.getElementById('sizeRange').value}vmin`;
            currentSettings.baseAngle = parseInt(document.getElementById('angleRange').value);

            // Reinitialize with new settings
            initMagnetLines(currentSettings);
        }

        // Reset to default settings
        function resetToDefaults() {
            currentSettings = {
                rows: 9,
                columns: 9,
                containerSize: "60vmin",
                lineColor: "#ffffff",
                lineWidth: "0.3vmin",
                lineHeight: "5vmin",
                baseAngle: 0,
                opacity: 0.8
            };

            // Update UI controls
            document.getElementById('columnsRange').value = 9;
            document.getElementById('rowsRange').value = 9;
            document.getElementById('widthRange').value = 0.3;
            document.getElementById('heightRange').value = 5;
            document.getElementById('opacityRange').value = 0.8;
            document.getElementById('sizeRange').value = 60;
            document.getElementById('angleRange').value = 0;

            updateDisplayValues();
            initMagnetLines(currentSettings);
        }

        // Update display values
        function updateDisplayValues() {
            document.getElementById('columnsValue').textContent = document.getElementById('columnsRange').value;
            document.getElementById('rowsValue').textContent = document.getElementById('rowsRange').value;
            document.getElementById('widthValue').textContent = document.getElementById('widthRange').value;
            document.getElementById('heightValue').textContent = document.getElementById('heightRange').value;
            document.getElementById('opacityValue').textContent = document.getElementById('opacityRange').value;
            document.getElementById('sizeValue').textContent = document.getElementById('sizeRange').value;
            document.getElementById('angleValue').textContent = document.getElementById('angleRange').value + '¬∞';
        }

        // Control functions
        function restartAnimation() {
            if (magnetLinesInstance) {
                magnetLinesInstance.destroy();
                magnetLinesInstance = null;
            }
            setTimeout(() => initMagnetLines(currentSettings), 100);
        }

        function toggleLines() {
            const container = document.getElementById('magnetDemo');
            const spans = container.querySelectorAll('span');
            spans.forEach(span => {
                span.style.opacity = span.style.opacity === '0' ? currentSettings.opacity : '0';
            });
        }

        // Initialize when page loads
        window.addEventListener('load', () => {
            // Set up event listeners for real-time updates
            document.getElementById('columnsRange').addEventListener('input', updateDisplayValues);
            document.getElementById('rowsRange').addEventListener('input', updateDisplayValues);
            document.getElementById('widthRange').addEventListener('input', updateDisplayValues);
            document.getElementById('heightRange').addEventListener('input', updateDisplayValues);
            document.getElementById('opacityRange').addEventListener('input', updateDisplayValues);
            document.getElementById('sizeRange').addEventListener('input', updateDisplayValues);
            document.getElementById('angleRange').addEventListener('input', updateDisplayValues);

            updateDisplayValues();
            setTimeout(() => initMagnetLines(currentSettings), 500);
        });
    </script>
</body>
</html>
